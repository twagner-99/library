<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Library</title>
</head>
<body>
    <div class="header grey-bck"></div>
    <div class="sidebar">
        <button id="openDia">Add Book to Library</button>
    </div>
    <div class="main teal-bck">
        <!-- Cards with book info will be apended here using JS -->
    </div>
    <div class="footer grey-bck"></div>

    <dialog>
        <p>Hey hey hey</p>
        <button id="closeDia">Close</button>
    </dialog>
    
    <script>
        const myLibrary = [];

        function Book(title, author, pages, read) {
            if (!new.target) {
                throw Error("You must use the 'new' operator to call the constructor.");
            }
            this.title = title;
            this.author = author;
            this.pages = pages;
            this.read = read;
            this.uuid = self.crypto.randomUUID();
            this.info = function() {
                return `${this.title} by ${this.author}, ${this.pages} pages, ${this.read}`
            }
        }

        // Should I define this stuff on the Book prototype to save memory?

        function addToLibrary(title, author, pages, read) {
            let bookObj = new Book(title, author, pages, read);
            myLibrary.push(bookObj);
        }

        addToLibrary('The Hobbit', 'J.R.R Tolkien', 295, 'not read yet');
        addToLibrary('CrowBro', 'Caw Caw', 100, 'already read');
        console.log(myLibrary);

        myLibrary.forEach((book) => {
            const main = document.querySelector(".main");

            const card = document.createElement('div');
            card.classList.add("card");
            card.textContent = book.info();
            main.appendChild(card);
        });

        const dialog = document.querySelector('dialog');
        const openDiaBtn = document.querySelector('#openDia');
        const closeDiaBtn = document.querySelector('#closeDia');

        openDiaBtn.addEventListener("click", () => {
            dialog.showModal();
        });

    </script>
</body>
</html>